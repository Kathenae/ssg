<?php

use Kathenae\SSG\Data;
use Kathenae\SSG\HttpHandler;
use Kathenae\SSG\Renderer;
use Kathenae\SSG\SSGHandler;

chdir(__DIR__);
require_once("../vendor/autoload.php");
$router = require_once 'routes.php';

Data::useDirectory("data");
$renderer = new Renderer('templates');

if (PHP_SAPI === 'cli') {
    $ssgHandler = new SSGHandler(
        $renderer,
        $router,
        'public',
        'assets'
    );
    $ssgHandler->handle();
} else {
    $httphandler = new HttpHandler(
        $renderer,
        $router
    );
    $httphandler->handle();
}